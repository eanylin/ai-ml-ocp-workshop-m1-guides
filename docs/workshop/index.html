<!DOCTYPE html>
<html>
<head>
  <title>
      The MLOps Workshop
  </title>
  <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="Gd8SoLAh/ZfoS2HLCW56cQq2JKz5Ba/7YwrXpFPj5NBxEFOgpYXz2tPzSMhDFGkGAa1hw0wxo45OOekV1Vljnw==" />
  <link rel="stylesheet" media="all" href="../assets/application-dcf5640dabe7c086c5db76b2e378b4def3309902bc32af61ab63094a23e1730b.css" data-turbolinks-track="reload" />
  <script src="../assets/application-1763c4134299cf1911a383dd8d9b23b574b429196c500fbba1a010629fc4c558.js" data-turbolinks-track="reload"></script>
</head>

<script type="text/javascript">
function gowithuser() {
    window.location.search = ('&userid=' + document.getElementById('useridfield').value);
}
function recycle() {
  window.location.search = ('&userid=reset');
}
</script>

<body>
<nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid d-flex justify-content-start">
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarContent">
      <span class="navbar-toggler-icon"></span>
    </button>
      <a class="navbar-brand mb-0 h1" href="mlops.html" id="workshopName">The MLOps Workshop</a>
        <span class="navbar-text" style="margin-right: 1rem;">|</span>
        <span class="navbar-text">Kubernetes Overview</span>
        <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">|</span>
        <span class="navbar-text">User ID: user1</span>
        <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i onclick="recycle();" style="color: green;" class="fa fa-recycle" aria-hidden="true"></i></span>
  </div>
</nav>

<script type="application/javascript">
    if (App.hasOwnProperty('subscription_id')) {
        App.cable.subscriptions.remove(App.subscription_id);
    }

    App.subscription_id = App.report_page_view('mlops#kubernetes-overview', 'd9172ed7-510d-408a-b653-5c241996eae0');
</script>

<main class="container-fluid">
  <div class="row">
    <div class="col-md-3">
      <ul class="list-group" id="labs-menu">
            <li class="list-group-item active">
              <span>1. Kubernetes Overview</span>
            </li>
            <a href="mlops/lab/navigating-openshift-ui.html" class="list-group-item list-group-item-action">
              2. Navigating OpenShift Web Console
            </a>
            <a href="mlops/lab/getting-started-mlops.html" class="list-group-item list-group-item-action">
              3. Getting Started with MLOps
            </a>
            <a href="mlops/lab/workshop-environment.html" class="list-group-item list-group-item-action">
              4. Your Workshop Environment
            </a>
            <a href="mlops/lab/exploring-data.html" class="list-group-item list-group-item-action">
              5. Exploring Data
            </a>
            <a href="mlops/lab/building-the-first-model.html" class="list-group-item list-group-item-action">
              6. Build the First Model
            </a>
            <a href="mlops/lab/productize-the-model.html" class="list-group-item list-group-item-action">
              7. Productize the Model
            </a>
            <a href="mlops/lab/deploy-to-staging.html" class="list-group-item list-group-item-action">
              8. Deploy The Model To Staging
            </a>
            <a href="mlops/lab/promote-to-production.html" class="list-group-item list-group-item-action">
              9. Promote to Production
            </a>
            <a href="mlops/lab/model-observability.html" class="list-group-item list-group-item-action">
              10. Model Monitoring and Observability
            </a>
            <a href="mlops/lab/continuous-training.html" class="list-group-item list-group-item-action">
              11. Continuous Training With A/B Testing
            </a>
            <a href="mlops/lab/decide-on-final-model.html" class="list-group-item list-group-item-action">
              12. Deploy The Chosen One
            </a>
            <a href="mlops/lab/integrate-with-application-services.html" class="list-group-item list-group-item-action">
              13. Completing the Solution with Red Hat Application Services
            </a>
        <a href="mlops/complete.html" class="list-group-item list-group-item-action list-group-item-warning">
          <i class="fa fa-print"></i> All labs in one page
        </a>
      </ul>
    </div>
    <div class="col-md-9">
      <div class="card" id="lab-content">
        <div class="card-header">
          <h6>
            <span class="pull-left badge badge-pill badge-primary">1</span>
            <span class="pull-left ml-2">Kubernetes Overview</span>
          </h6>
        </div>
        <div class="card-body">
          <div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kubernetes is an open source container orchestration engine for
automating deployment, scaling, and management of containerized
applications. It has a large and rapidly growing ecosystem.</p>
</div>
<div class="paragraph">
<p>The name Kubernetes originates from Greek, meaning helmsman or pilot.
Google open-sourced the Kubernetes project in 2014.</p>
</div>
<div class="paragraph">
<p>This module provides a brief overview on the core concepts in
Kubernetes, based on the documentation in
<a href="https://kubernetes.io/docs/home/" target="_blank" rel="noopener">kubernetes.io</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kubernetes_control_plane">Kubernetes Control Plane</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kubernetes API objects are used to describe the <em>desired</em> state of the
Kubernetes cluster. This includes describing the desired end state of
the applications, workloads, container images, number of replicas,
network, disk resources, etc.</p>
</div>
<div class="paragraph">
<p>The Control Plane maintains a record of all of the Kubernetes Objects in
the system and runs continuous control loops to manage the state of all
the objects. At any given point in time, the control loops will respond
to changes in the cluster and work to make the actual state of all the
objects match the desired state.</p>
</div>
<div class="paragraph">
<p>The Kubernetes Control Plane consists of a collection of processes
running within the cluster:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://kubernetes.io/docs/concepts/#overview" target="_blank" rel="noopener">Master</a></p>
<div class="ulist">
<ul>
<li>
<p>A collection of 3 processes that run on a single node, designated as
the master node in the cluster. The processes are
<a href="https://kubernetes.io/docs/admin/kube-apiserver/" target="_blank" rel="noopener">kube-apiserver</a>,
<a href="https://kubernetes.io/docs/admin/kube-controller-manager/" target="_blank" rel="noopener">kube-controller-manager</a>
and <a href="https://kubernetes.io/docs/admin/kube-scheduler/" target="_blank" rel="noopener">kube-scheduler</a></p>
</li>
<li>
<p>Responsible for maintaining the desired state of the cluster</p>
</li>
<li>
<p>The master can also be replicated for availability and redundancy.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/architecture/nodes/" target="_blank" rel="noopener">Node</a></p>
<div class="ulist">
<ul>
<li>
<p>Machines (VMs, physical servers, etc) that run the applications and
cloud workflows</p>
</li>
<li>
<p>Nodes are controlled by Kubernetes Master</p>
</li>
<li>
<p>Runs 2 processes,
i.e. <a href="https://kubernetes.io/docs/admin/kubelet/" target="_blank" rel="noopener">kubelet</a> and
<a href="https://kubernetes.io/docs/admin/kube-proxy/" target="_blank" rel="noopener">kube-proxy</a></p>
</li>
<li>
<p>kubelet allows the node to communicate with the Kubernetes Master</p>
</li>
<li>
<p>kube-proxy is a network proxy which reflects Kubernetes networking
services on each node</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kubernetes_objects">Kubernetes Objects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The basic Kubernetes object include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/" target="_blank" rel="noopener">Pod</a></p>
<div class="ulist">
<ul>
<li>
<p>A Pod is the smallest unit in the Kubernetes object model that can be
created or deployed. It represents processes running on the cluster.</p>
</li>
<li>
<p>A Pod encapsulates an application’s container(s), storages resources,
unique network identity (IP address) as well as options that govern how
the container(s) should run</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/services-networking/service/" target="_blank" rel="noopener">Service</a></p>
<div class="ulist">
<ul>
<li>
<p>An abstract way to expose an application running on a set of Pods as
a network service</p>
</li>
<li>
<p>An abstraction which defines a logical set of Pods and a policy by
which to access them</p>
</li>
<li>
<p>The set of Pods that are targeted by a Service is usually determined
by a
<a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/" target="_blank" rel="noopener">selector</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/" target="_blank" rel="noopener">Volume</a></p>
<div class="ulist">
<ul>
<li>
<p>On-disk files in a Container are ephemeral, which is not idea for
non-trivial applications when running in Containers</p>
</li>
<li>
<p>Kubernetes volume allows data to be preserved across Container
restarts</p>
</li>
<li>
<p>It has an explicit lifetime, i.e. the same as the Pod that encloses
it</p>
</li>
<li>
<p>There is support for different types of
<a href="https://kubernetes.io/docs/concepts/storage/volumes/#types-of-volumes" target="_blank" rel="noopener">Volumes</a>,
such as awsElasticBlock, cephfs, etc</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/" target="_blank" rel="noopener">Namespace</a></p>
<div class="ulist">
<ul>
<li>
<p>Kubernetes supports multiple virtual clusters backed by the same
physical cluster</p>
</li>
<li>
<p>These virtual clusters are called namespaces and are a way to divide
cluster resources between multiple users via
<a href="https://kubernetes.io/docs/concepts/policy/resource-quotas/">resource
quota</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<hr>
<div class="paragraph">
<p>Kubernetes also contains higher-level abstractions that rely on
controllers to build upon the basic objects to provide additional
functionality and convenience features. These include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" target="_blank" rel="noopener">Deployment</a></p>
<div class="ulist">
<ul>
<li>
<p>Provides declarative updates for Pods and ReplicaSets</p>
</li>
<li>
<p>You can describe a desired state in a Deployment, and the Deployment
Controller changes the actual state to the desired state at a controlled
rate.</p>
</li>
<li>
<p>Used in different scenarios, e.g.</p>
<div class="ulist">
<ul>
<li>
<p>Create a Deployment to rollout a ReplicaSet</p>
<div class="ulist">
<ul>
<li>
<p>ReplicaSet creates Pods in the background and checks the status of
the rollout to see if it succeeds or not</p>
</li>
</ul>
</div>
</li>
<li>
<p>Rollback to an earlier Deployment revision if the current state of
the Deployment is not stable</p>
<div class="ulist">
<ul>
<li>
<p>Each rollback updates the revision of the Deployment</p>
</li>
</ul>
</div>
</li>
<li>
<p>Scale up the Deployment to facilitate more load</p>
</li>
<li>
<p>Clean up ReplicaSets</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/" target="_blank" rel="noopener">DaemonSet</a></p>
<div class="ulist">
<ul>
<li>
<p>Ensures that all or some Nodes run a copy of the Pod</p>
</li>
<li>
<p>Pods are added and garbage collected as nodes are added/removed from
the cluster</p>
</li>
<li>
<p>Deleting a DaemonSet will clean up all the Pods that it created</p>
</li>
<li>
<p>Common use cases include the following:</p>
<div class="ulist">
<ul>
<li>
<p>Running cluster storage daemon on every node</p>
</li>
<li>
<p>Running logs collection daemon on every node</p>
</li>
<li>
<p>Running node monitoring daemon on every node</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/" target="_blank" rel="noopener">StatefulSet</a></p>
<div class="ulist">
<ul>
<li>
<p>Workload API object used to manage stateful applications</p>
</li>
<li>
<p>Manages deployment scaling of a set of Pods and provides <em>guarantees</em>
about the ordering and <em>uniqueness</em> of these Pods</p>
</li>
<li>
<p>Unlike a Deployment, a StatefulSet maintains a sticky identity for
each of their Pods</p>
</li>
<li>
<p>Pods are created from the same spec but are not interchangeable,
i.e. each has a persistent identifier that it maintains across any
rescheduling</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/" target="_blank" rel="noopener">ReplicaSet</a></p>
<div class="ulist">
<ul>
<li>
<p>Maintain a stable set of replica Pods running at any given time</p>
</li>
<li>
<p>It is used to guarantee the availability of a specified number of
identical Pods</p>
</li>
<li>
<p>A ReplicaSet is linked to its Pods via the Pods’
<a href="https://kubernetes.io/docs/concepts/workloads/controllers/garbage-collection/#owners-and-dependents" target="_blank" rel="noopener">metadata.ownerReferences</a>
field, which specifies what resource the current object is owned by</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/workloads/controllers/job/" target="_blank" rel="noopener">Job</a></p>
<div class="ulist">
<ul>
<li>
<p>Creates one or more Pods and ensures that a specified number of them
successfully terminate</p>
</li>
<li>
<p>Tracks successful completions of pods</p>
</li>
<li>
<p>When a specified number of successful completions is reached, the
task, i.e, Job is complete</p>
</li>
<li>
<p>Deleting a Job will clean up the Pods it created</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kubernetes_cluster_architecture">Kubernetes Cluster Architecture</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="mlops/asset/images/kubernetes-components.png" alt="k8s_architecture">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_containers">Containers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Containers are a technology for packaging the compiled code for an
application along with the dependencies it needs at run time. The
standardization from having dependencies included means that we will
always get the same behavior for the container no matter where we run
it. Containers decouple applications from the underlying infrastructure,
which makes it easy to deploy in different private/public clouds or
operating systems (OS).</p>
</div>
<div class="sect2">
<h3 id="_container_images">Container Images</h3>
<div class="paragraph">
<p>A container image represents binary data that encapsulates an
application and all its software dependencies. It is an executable
software bundle that can run standalone and one that makes very well
defined assumptions about its runtime environment.</p>
</div>
<div class="paragraph">
<p>The container image of an application is typically pushed to a registry
before it is referred to in a Pod.</p>
</div>
<div class="paragraph">
<p>Containers are immutable by design, i.e. you cannot change the code of a
container that is already running. If you have a containerized
application and want to make changes, you need to build a new container
that includes the change, then recreate the container to start from the
updated image.</p>
</div>
</div>
<div class="sect2">
<h3 id="_container_runtimes">Container Runtimes</h3>
<div class="paragraph">
<p>The container runtime is the software that is responsible for running
containers.</p>
</div>
<div class="paragraph">
<p>Kubernetes supports several container runtimes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://cri-o.io/#what-is-cri-o" target="_blank" rel="noopener">CRI-O</a></p>
</li>
<li>
<p><a href="https://containerd.io/docs/" target="_blank" rel="noopener">containerd</a></p>
</li>
<li>
<p><a href="https://docs.docker.com/engine/" target="_blank" rel="noopener">Docker</a></p>
</li>
<li>
<p>Any other implementation of the
<a href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-node/container-runtime-interface.md" target="_blank" rel="noopener">Kubernetes CRI</a> (Container Runtime Interface)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_containers_vs_virtual_machines">Containers vs Virtual Machines</h3>
<div class="paragraph">
<p>Linux containers and virtual machines (VMs) are packaged computing
environments that combine various IT components and isolate them from
the rest of the system. Their main differences are in terms of scale and
portability.</p>
</div>
<div class="paragraph">
<p>Containers are typically measured by the megabyte. They do not package
anything bigger than an application and all the files necessary to run,
and are often used to package single functions that perform specific
tasks (known as a microservice). The lightweight nature of containers
and their shared OS makes them very easy to move across multiple
environments.</p>
</div>
<div class="paragraph">
<p>VMs are typically measured by the gigabyte. They usually contain their
own OS, allowing them to perform multiple resource-intensive functions
at once. The increased resources available to VMs allow them to
abstract, split, duplicate, and emulate entire servers, OSs, desktops,
databases, and networks.</p>
</div>
<div class="paragraph">
<p>Compared to VMs, containers are best used to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Build cloud-native apps</p>
</li>
<li>
<p>Package microservices</p>
</li>
<li>
<p>Instill DevOps or CI/CD practices</p>
</li>
<li>
<p>Move scalable IT projects across a diverse IT footprint that shares
the same OS</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Compared to containers, VMs are best used to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>House traditional, legacy, and monolithic workloads</p>
</li>
<li>
<p>Isolate risky development cycles</p>
</li>
<li>
<p>Provision infrastructural resources (such as networks, servers, and
data)</p>
</li>
<li>
<p>Run a different OS inside another OS (such as running Unix on Linux)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
        </div>
        <div class="card-footer">
            <a href="mlops/lab/navigating-openshift-ui.html" class="btn btn-primary btn-sm pull-right">
              Navigating OpenShift Web Console <i class="fa fa-arrow-right"></i>
            </a>
        </div>
      </div>
    </div>
  </div>
</main>


</body>
</html>
